function buttonClick(e,t,n){var i=new APMetric(BUTTON_CLICK,e,t);putRecord(i,n)}function orderConfirm(e,t,n,i,r){var a=new APMetric(ORDER_CONFIRM,e,t,n,i);putRecord(a,r)}function siteLanding(e,t){var n=new APMetric(SITE_LANDING,e);putRecord(n,t)}function checkoutRender(e,t){var n=new APMetric(CHECKOUT_RENDER,e);putRecord(n,t)}function abandonOrder(e,t,n){var i=new APMetric(ABANDON_ORDER,e,t);putRecord(i,n)}function recordEvent(e,t,n,i,r,a){var o=new APMetric(e,t,n,i,r);putRecord(o,a)}function putRecord(e,t){var n={Data:e,PartitionKey:"test"};n=JSON.stringify(n);var i=temp_api_gateway,r=new XMLHttpRequest;r.open("PUT",i),r.setRequestHeader("Content-Type","application/json"),r.onload=function(){t&&t()},r.send(n)}function createPaymentRequestObject(){if(!window.PaymentRequest){var e="This browser does not support web payments";return void(document.getElementById("PaymentResponse").innerHTML=e)}const t=getSupportedPaymentMethods(),n={requestShipping:!0,requestPayerName:!0,requestPayerPhone:!0,requestPayerEmail:!0};var i=createOrderDetailsObject(),r=new PaymentRequest(t,i,n);r.addEventListener("shippingaddresschange",function(e){e.updateWith(Promise.resolve(i))});var a=parseFloat(i.total.amount.value);r.addEventListener("shippingoptionchange",function(e){e.updateWith(new Promise(function(e,t){updateDetails(i,a,r.shippingOption,e,t)}))}),showPaymentRequest(r)}function getSupportedPaymentMethods(){const e="https://manjaly.aka.corp.amazon.com/devo/us/live/w3cpayapp/",t="https://android.com/pay",n=[{supportedMethods:["basic-card"],data:{merchantId:"A00776781CGRB9X5FMXVX"}},{supportedMethods:[e],data:{merchantId:"A00776781CGRB9X5FMXVX"}},{supportedMethods:[t],data:{environment:"TEST",allowedCardNetwork:["AMEX","MASTERCARD","VISA","DISCOVER"],paymentMethodTokenizationParameters:{tokenizationType:"GATEWAY_TOKEN",parameters:{gateway:"stripe","stripe:publishableKey":"pk_live_fD7ggZCtrB0vJNApRX5TyJ9T","stripe:version":"2016-07-06"}}}}];return n}function createOrderDetailsObject(){var e=parseFloat(document.getElementById("amount").value),t={total:{label:"Total",amount:{currency:"USD",value:e}},shippingOptions:[{id:"standard",label:"Standard shipping",amount:{currency:"USD",value:"0.00"},selected:!0},{id:"express",label:"Express shipping",amount:{currency:"USD",value:"10.00"}}]};return t}function updateDetails(e,t,n,i,r){if("standard"==n)selectedShippingOption=e.shippingOptions[0],otherShippingOption=e.shippingOptions[1],e.total.amount.value=t;else{if("express"!=n)return void r("Unknown shipping option '"+n+"'");selectedShippingOption=e.shippingOptions[1],otherShippingOption=e.shippingOptions[0],e.total.amount.value=t+10}selectedShippingOption.selected=!0,otherShippingOption.selected=!1,i(e)}function showPaymentRequest(e){e.show().then(function(e){console.log(e);var t=JSON.stringify(e);document.getElementById("PaymentResponse").innerHTML=t,e.complete()})["catch"](function(e){var t="Could not complete the transaction";document.getElementById("PaymentResponse").innerHTML=t,console.log(e)})}var BUTTON_CLICK="BUTTON_CLICK",ORDER_CONFIRM="ORDER_CONFIRM",SITE_LANDING="SITE_LANDING",CHECKOUT_RENDER="CHECKOUT_RENDER",ABANDON_ORDER="ABANDON_ORDER",temp_api_gateway="https://zk99lazmfl.execute-api.us-west-2.amazonaws.com/apa/streams/pay_analytics/record",APMetric=function(e,t,n,i,r){this.merch_id=t,this.pay_opt=n,this.amount=i,this.currency=r,this.event_type=e,this.session_id=Math.floor(1e3*Math.random()),this.timestamp=Date.now(),this.useragent=navigator.userAgent};window.logout=function(){amazon.Login.logout()},window.populateORO=function(e){document.getElementById("contractId").innerHTML=e},window.callbackPopulator=function(e){document.getElementById(e).value="",document.getElementById(e).value="triggered"};var buyButton=document.getElementById("BuyButton");buyButton&&buyButton.addEventListener("click",function(){createPaymentRequestObject()}),function(e){"use strict";function t(e){var t=document.querySelector(e),n=document.createElement("div");n.style.setProperty("box-shadow","inset rgb(204, 204, 204) 0px 0px 16px 0px"),n.style.setProperty("padding","12px 20px"),n.style.setProperty("padding-bottom","0px"),n.style.setProperty("margin","2px 5px"),n.style.setProperty("font-size","0.9em"),n.style.setProperty("display","inline-block"),n.style.setProperty("border-radius","5px"),n.style.setProperty("margin-left","0px"),n.style.setProperty("font-family",'"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif"');var i=document.createElement("div"),r=document.createElement("label");r.style.setProperty("display","inline-block"),r.style.setProperty("width","200px"),r.style.setProperty("margin-right","30px"),r.textContent="Width: "+t.clientWidth+"px";var a=document.createElement("label");a.style.setProperty("display","inline-block"),a.style.setProperty("width","200px"),a.style.setProperty("margin-right","30px"),a.textContent="Height: "+t.clientHeight+"px",i.appendChild(a),i.appendChild(r),n.appendChild(i);var o=document.createElement("input");o.setAttribute("type","range"),o.setAttribute("min","228"),o.setAttribute("max","455"),o.setAttribute("step","1"),o.style.setProperty("width","200px"),o.style.setProperty("margin-right","30px"),n.appendChild(o),o.addEventListener("input",function(e){t.style.setProperty("height",e.target.value+"px"),a.textContent="Height: "+e.target.value+"px"}),o.value=t.clientHeight;var p=document.createElement("input");p.setAttribute("type","range"),p.setAttribute("min","302"),p.setAttribute("max","944"),p.setAttribute("step","1"),p.style.setProperty("width","200px"),p.value=t.clientWidth,n.appendChild(p),p.addEventListener("input",function(e){t.style.setProperty("width",e.target.value+"px"),r.textContent="Width: "+e.target.value+"px"}),t.parentNode.insertBefore(n,t)}e.createSliderFor=t}(window);
